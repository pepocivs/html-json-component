<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>html-json-component test</title>

    <script src="../../webcomponentsjs/webcomponents-loader.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../html-json-component.html">
  </head>
  <body>

    <test-fixture id="BasicTestFixture">
      <template>
        <html-json-component output="list"></html-json-component>
      </template>
    </test-fixture>

    <test-fixture id="ChangedPropertyTestFixture">
      <template>
        <html-json-component json="{'key': 'value'}" equivalences="{'key': 'The key'}" output="list"></html-json-component>        
      </template>
    </test-fixture>

    <script>
      suite('html-json-component', () => {

        test('Should get blank when instantiating the element with no properties', () => {
          const element = fixture('BasicTestFixture');
          const elementShadowRoot = element.shadowRoot;
          const elementHeader = elementShadowRoot.querySelector('h2');
          assert.equal(elementHeader.innerHTML, 'JSON - HTML Printer');
          const printArea = elementShadowRoot.querySelector('#printer');
          assert.equal(printArea.innerHTML, '');
        });

        test('Should show printer JSON when instantiating the element with properties', () => {
          const element = fixture('ChangedPropertyTestFixture');
          const elementShadowRoot = element.shadowRoot;
          const elementHeader = elementShadowRoot.querySelector('h2');
          assert.equal(elementHeader.innerHTML, 'JSON - HTML Printer');
          const printedKey = elementShadowRoot.querySelector('.html-json_key');
          assert.equal(printedKey.innerHTML, 'The key');
          const printedValue = elementShadowRoot.querySelector('.html-json_value');
          assert.equal(printedValue.innerHTML, 'value');
        });

      });
    </script>

  </body>
</html>
